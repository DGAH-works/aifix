太阳神三国杀游戏工具扩展包・AI修复

适用版本：V2 - 愚人版（版本号：20150401）清明补丁（版本号：20150405）

功能：出牌阶段，你可以选择一项：

1、重置AI

2、重置AI身份判断结果

3、显示AI关系表

4、公布角色身份

5、指定AI集火目标

设计初衷：

曾经有百度贴吧吧友指出，神杀的AI不允许玩家犯错，作为忠臣不小心做了内奸该干的事情，就再也洗不清自己了。

因此，推出了这个“AI修复”工具包，希望玩家在发现自己被误判身份时，可以手动纠正AI中的错误。

实现原理：

1、重置AI

直接调用Room中的resetAI函数重置目标角色的AI。

2、重置AI身份判断结果

将AI用于记录身份判断结果的sgs.role_evaluation表和sgs.ai_role表重置为游戏开始时的状态。

对于非主公武将，就是把sgs.role_evaluation表中的各项数值清零，并在sgs.ai_role表中填入"neutral"值。

3、显示AI关系表（严重影响游戏体验！请谨慎使用！）

提取目标角色的self.friends_noself表和self.enemies表，并将其内容通过Room的sendLog函数显示在游戏记录中。

4、公布角色身份（严重影响游戏体验！请谨慎使用！）

首先使用Room的broadcastProperty函数在界面中公开目标角色的身份，

然后修改目标角色的sgs.role_evaluation表和sgs.ai_role表，

最后对所有存活角色调用SmartAI的updatePlayers函数以更新敌友关系。

5、指定AI集火目标（实验选项）

修改sgs.getDefense函数和sgs.DefenseSlash函数，使得在AI看来目标角色的防御能力最弱（其值被定为0.00001），

从而令目标角色在各种针对防御能力或威胁能力的排序中获得最高的排位。

此外，还修改了SmartAI的getPriorTarget函数，将最优先目标的结果直接规定为目标角色。

注意1：AI集火目标具有唯一性，修改AI集火目标之后，原先的目标角色不再作为集火目标。

注意2：由于目标角色的防御能力视为最弱，所以其在作为本方集火目标的同时，也成为了对方的重点保护角色。

注意3：只有当AI认为目标角色是敌人时，才会考虑响应集火（可以使用“显示AI关系表”功能查看AI间关系）。

操作步骤（请留意带星的步骤）：

1、★启动服务器时，在“武将包”中勾选“AI修复”包★。

2、出牌阶段，点击“AI修复”技能按钮。

3、在弹出的选项框中选择一个修复项目。

4、★再次点击“AI修复”技能按钮★。

5、选择一定的目标角色。

6、点击“确定”按钮。

扩展包设计：独孤安河